// Hamburger/Fixed Navbar
document.addEventListener("DOMContentLoaded", () => {
  const menu = document.querySelector(".menu");
  const menuItem = document.querySelectorAll(".menu_item");
  const hamburger = document.querySelector(".hamburger");
  const body = document.body;

  // Close the dropdown if clicked outside of it
  // document.addEventListener("click", function (event) {
  //   if (!dropdown.contains(event.target)) {
  //     dropdownContent.classList.remove("show");
  //   }
  // });

  // Fixed Navbar Offset
  const navbarHeight = document.querySelector(".navbar").offsetHeight;

  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();

      const targetId = this.getAttribute("href");
      const targetElement = document.querySelector(targetId);

      window.scrollTo({
        top: targetElement.offsetTop - navbarHeight,
        behavior: "smooth",
      });
    });
  });

  // Hamburger Menu
  hamburger.addEventListener("click", () => {
    hamburger.classList.toggle("hamburger_active"),
      menu.classList.toggle("menu_active");
    body.classList.toggle("no-scroll");
  }),
    menuItem.forEach((item) => {
      item.addEventListener("click", () => {
        hamburger.classList.toggle("hamburger_active"),
          menu.classList.toggle("menu_active");
        body.classList.remove("no-scroll");
      });
    });
  // ,
  // dropdownLinks.forEach((item) => {
  //   item.addEventListener("click", () => {
  //     hamburger.classList.toggle("hamburger_active"),
  //       menu.classList.toggle("menu_active");
  //     body.classList.remove("no-scroll");
  //   });
  // });
});

// Top Scroll
// When the user scrolls down 900px from the top of the document, show the button
const scrollToTopBtn = document.querySelector(".pageup");
const navbarFluid = document.querySelector(".navbar-fluid");

window.onscroll = function () {
  const scrollTop =
    document.body.scrollTop || document.documentElement.scrollTop;

  scrollToTopBtn.style.display = scrollTop > 900 ? "block" : "none";
  navbarFluid.style.backgroundColor =
    scrollTop > 100 ? "rgba(255, 255, 255, 1)" : "rgba(255, 255, 255, 0.95)";
  navbarFluid.style.boxShadow =
    scrollTop > 100 ? "0px 2px 4px 0px rgba(47, 49, 51, 0.2)" : "none";
};

// Smooth scrolling
scrollToTopBtn.addEventListener("click", function () {
  window.scrollTo({
    top: 0,
    behavior: "smooth",
  });
});

// Video show/hide
// const video = document.querySelector(".hero-video");
// const fallback = document.querySelector(".fallback-image");

// video.addEventListener("canplay", () => {
//   // Hide the fallback image
//   fallback.style.display = "none";
//   // Show the video
//   video.classList.add("ready");
// });

// if (windowWidth <= 768) {
//   // Hide video on mobile
//   video.style.display = "none";
// }

// // Show the fallback image if the video fails
// video.addEventListener("error", () => {
//   fallback.style.display = "block";
// });

const video = document.getElementById("hero-video");
const fallbackImage = document.querySelector(".fallback-image");

// Show the video only after it has loaded
video.addEventListener("canplaythrough", () => {
  fallbackImage.style.display = "none"; // Hide the image when the video is ready
});

// If video fails to load, keep the fallback image
video.addEventListener("error", () => {
  fallbackImage.style.display = "block";
});

// Section reveal
const allSections = document.querySelectorAll(".section");

const revealSection = function (entries, observer) {
  const [entry] = entries;

  if (!entry.isIntersecting) return;

  entry.target.classList.remove("section--hidden");
  observer.unobserve(entry.target);
};

const sectionObserver = new IntersectionObserver(revealSection, {
  root: null,
  threshold: 0.1,
});

allSections.forEach(function (section) {
  sectionObserver.observe(section);
  section.classList.add("section--hidden");
});
